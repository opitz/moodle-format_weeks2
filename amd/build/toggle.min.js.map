{"version":3,"file":"toggle.min.js","sources":["../src/toggle.js"],"sourcesContent":["define(['jquery'], function($) {\n    /* eslint no-console: [\"error\", { allow: [\"log\", \"warn\", \"error\"] }] */\n    return {\n        init: function() {\n// ---------------------------------------------------------------------------------------------------------------------\n            var updateToggleSeq = function() {\n                var toggleSeq = {};\n                $(\"li.section\").each(function() {\n                    if (!$(this).find('.toggle_area').hasClass('hidden')) {\n                        toggleSeq[$(this).attr('section-id')] = '1';\n                    }\n                });\n\n                // Now write the sequence for this course into the user preference\n                var courseid = $('#courseid').attr('courseid');\n                $.ajax({\n                    url: \"format/weeks2/ajax/update_toggles.php\",\n                    type: \"POST\",\n                    data: {\n                        'courseid': courseid,\n                        'toggleSeq': JSON.stringify(toggleSeq),\n                        'sesskey': M.cfg.sesskey\n                    },\n                    success: function(result) {\n                        if (result !== '') {\n                            console.log('New toggle sequence: ' + result);\n                        }\n                    }\n                });\n\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // toggle a section content\n            var toggleSection = function() {\n                $(\".sectionname\").on('click', function(event) {\n                    if (event.altKey) {\n                        console.log('ALT pressed...!');\n                        if ($(this).find('.toggler:visible').hasClass('toggler_closed')) {\n                            $('.toggler_open').show();\n                            $('.toggler_closed').hide();\n                            $('.toggle_area').removeClass('hidden').show();\n                        } else {\n                            $('.toggler_open').hide();\n                            $('.toggler_closed').show();\n                            $('.toggle_area').addClass('hidden').hide();\n                            // Do not hide section 0\n                            $('#section-0').find('.sectionbody').removeClass('hidden').show();\n                        }\n                    } else {\n                        if ($(this).find('.toggler:visible').hasClass('toggler_closed')) {\n                            $(this).find('.toggler:visible').hide();\n                            $(this).find('.toggler_open').show();\n                            $(this).parent().parent().find('.toggle_area').removeClass('hidden').show();\n                        } else {\n                            $(this).find('.toggler:visible').hide();\n                            $(this).find('.toggler_closed').show();\n                            $(this).parent().parent().find('.toggle_area').addClass('hidden').hide();\n                        }\n                    }\n                    // Now get the toggler status of each section\n                    updateToggleSeq();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // toggle a section content\n            var toggleSectionsOpen = function() {\n                $(\"#btn_toggle_all_open\")\n                .on('click', function() {\n                    $('.toggler_closed').click();\n\n                    // Now get the toggler status of each section\n                    updateToggleSeq();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // toggle a section content\n            var toggleSectionsClose = function() {\n                $(\"#btn_toggle_all_close\")\n                .on('click', function() {\n                    $('.toggler_open').click();\n\n                    // Now get the toggler status of each section\n                    updateToggleSeq();\n                });\n            };\n\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var toggleAll = function() {\n                $('#btn_open_all').on('click', function() {\n                    $('.toggler_open').show();\n                    $('.toggler_closed').hide();\n                    $('.toggle_area').removeClass('hidden').show();\n                    updateToggleSeq();\n                });\n                $('#btn_close_all').on('click', function() {\n                    $('.toggler_open').hide();\n                    $('.toggler_closed').show();\n                    $('.toggle_area').addClass('hidden').hide();\n                    // Do not hide section 0\n                    $('#section-0').find('.sectionbody').removeClass('hidden').show();\n                    updateToggleSeq();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var initFunctions = function() {\n                // Load all required functions above\n                toggleSection();\n                toggleSectionsOpen();\n                toggleSectionsClose();\n                toggleAll();\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            $(document).ready(function() {\n                console.log('=================< topics2/toggle.js >=================');\n                initFunctions();\n            });\n        }\n    };\n});\n"],"names":["define","$","init","updateToggleSeq","toggleSeq","each","this","find","hasClass","attr","courseid","ajax","url","type","data","JSON","stringify","M","cfg","sesskey","success","result","console","log","initFunctions","on","event","altKey","show","hide","removeClass","addClass","parent","click","document","ready"],"mappings":"AAAAA,8BAAO,CAAC,WAAW,SAASC,SAEjB,CACHC,KAAM,eAEEC,gBAAkB,eACdC,UAAY,GAChBH,EAAE,cAAcI,MAAK,WACZJ,EAAEK,MAAMC,KAAK,gBAAgBC,SAAS,YACvCJ,UAAUH,EAAEK,MAAMG,KAAK,eAAiB,YAK5CC,SAAWT,EAAE,aAAaQ,KAAK,YACnCR,EAAEU,KAAK,CACHC,IAAK,wCACLC,KAAM,OACNC,KAAM,UACUJ,mBACCK,KAAKC,UAAUZ,mBACjBa,EAAEC,IAAIC,SAErBC,QAAS,SAASC,QACC,KAAXA,QACAC,QAAQC,IAAI,wBAA0BF,YAoFlDG,cAAgB,WA1EhBvB,EAAE,gBAAgBwB,GAAG,SAAS,SAASC,OAC/BA,MAAMC,QACNL,QAAQC,IAAI,mBACRtB,EAAEK,MAAMC,KAAK,oBAAoBC,SAAS,mBAC1CP,EAAE,iBAAiB2B,OACnB3B,EAAE,mBAAmB4B,OACrB5B,EAAE,gBAAgB6B,YAAY,UAAUF,SAExC3B,EAAE,iBAAiB4B,OACnB5B,EAAE,mBAAmB2B,OACrB3B,EAAE,gBAAgB8B,SAAS,UAAUF,OAErC5B,EAAE,cAAcM,KAAK,gBAAgBuB,YAAY,UAAUF,SAG3D3B,EAAEK,MAAMC,KAAK,oBAAoBC,SAAS,mBAC1CP,EAAEK,MAAMC,KAAK,oBAAoBsB,OACjC5B,EAAEK,MAAMC,KAAK,iBAAiBqB,OAC9B3B,EAAEK,MAAM0B,SAASA,SAASzB,KAAK,gBAAgBuB,YAAY,UAAUF,SAErE3B,EAAEK,MAAMC,KAAK,oBAAoBsB,OACjC5B,EAAEK,MAAMC,KAAK,mBAAmBqB,OAChC3B,EAAEK,MAAM0B,SAASA,SAASzB,KAAK,gBAAgBwB,SAAS,UAAUF,QAI1E1B,qBAOJF,EAAE,wBACDwB,GAAG,SAAS,WACTxB,EAAE,mBAAmBgC,QAGrB9B,qBAOJF,EAAE,yBACDwB,GAAG,SAAS,WACTxB,EAAE,iBAAiBgC,QAGnB9B,qBAOJF,EAAE,iBAAiBwB,GAAG,SAAS,WAC3BxB,EAAE,iBAAiB2B,OACnB3B,EAAE,mBAAmB4B,OACrB5B,EAAE,gBAAgB6B,YAAY,UAAUF,OACxCzB,qBAEJF,EAAE,kBAAkBwB,GAAG,SAAS,WAC5BxB,EAAE,iBAAiB4B,OACnB5B,EAAE,mBAAmB2B,OACrB3B,EAAE,gBAAgB8B,SAAS,UAAUF,OAErC5B,EAAE,cAAcM,KAAK,gBAAgBuB,YAAY,UAAUF,OAC3DzB,sBAcRF,EAAEiC,UAAUC,OAAM,WACdb,QAAQC,IAAI,2DACZC"}