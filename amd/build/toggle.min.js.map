{"version":3,"sources":["../src/toggle.js"],"names":["define","$","init","updateToggleSeq","toggleSeq","each","find","hasClass","attr","courseid","ajax","url","type","data","JSON","stringify","M","cfg","sesskey","success","result","console","log","toggleSection","on","event","altKey","show","hide","removeClass","addClass","parent","toggleSectionsOpen","click","toggleSectionsClose","toggleAll","initFunctions","document","ready"],"mappings":"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","sourcesContent":["define(['jquery', 'jqueryui'], function($) {\n    /* eslint no-console: [\"error\", { allow: [\"log\", \"warn\", \"error\"] }] */\n    return {\n        init: function() {\n// ---------------------------------------------------------------------------------------------------------------------\n            var updateToggleSeq = function() {\n                var toggleSeq = {};\n                $(\"li.section\").each(function() {\n                    if (!$(this).find('.toggle_area').hasClass('hidden')) {\n                        toggleSeq[$(this).attr('section-id')] = '1';\n                    }\n                });\n\n                // Now write the sequence for this course into the user preference\n                var courseid = $('#courseid').attr('courseid');\n                $.ajax({\n                    url: \"format/weeks2/ajax/update_toggles.php\",\n                    type: \"POST\",\n                    data: {\n                        'courseid': courseid,\n                        'toggleSeq': JSON.stringify(toggleSeq),\n                        'sesskey': M.cfg.sesskey\n                    },\n                    success: function(result) {\n                        if (result !== '') {\n                            console.log('New toggle sequence: ' + result);\n                        }\n                    }\n                });\n\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // toggle a section content\n            var toggleSection = function() {\n                $(\".toggler\").on('click', function(event) {\n                    if (event.altKey) {\n                        console.log('ALT pressed...!');\n                        if ($(this).hasClass('toggler_closed')) {\n                            $('.toggler_open').show();\n                            $('.toggler_closed').hide();\n                            $('.toggle_area').removeClass('hidden').show();\n                        } else {\n                            $('.toggler_open').hide();\n                            $('.toggler_closed').show();\n                            $('.toggle_area').addClass('hidden').hide();\n                            // Do not hide section 0\n                            $('#section-0').find('.sectionbody').removeClass('hidden').show();\n                        }\n                    } else {\n                        if ($(this).hasClass('toggler_closed')) {\n                            $(this).parent().find('.toggler_open').show();\n                            $(this).hide();\n                            $(this).parent().parent().parent().find('.toggle_area').removeClass('hidden').show();\n                        } else {\n                            $(this).parent().find('.toggler_closed').show();\n                            $(this).hide();\n                            $(this).parent().parent().parent().find('.toggle_area').addClass('hidden').hide();\n                        }\n                    }\n                    // Now get the toggler status of each section\n                    updateToggleSeq();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // toggle a section content\n            var toggleSectionsOpen = function() {\n                $(\"#btn_toggle_all_open\")\n                .on('click', function() {\n                    $('.toggler_closed').click();\n\n                    // Now get the toggler status of each section\n                    updateToggleSeq();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            // toggle a section content\n            var toggleSectionsClose = function() {\n                $(\"#btn_toggle_all_close\")\n                .on('click', function() {\n                    $('.toggler_open').click();\n\n                    // Now get the toggler status of each section\n                    updateToggleSeq();\n                });\n            };\n\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var toggleAll = function() {\n                $('#btn_open_all').on('click', function() {\n                    $('.toggler_open').show();\n                    $('.toggler_closed').hide();\n                    $('.toggle_area').removeClass('hidden').show();\n                    updateToggleSeq();\n                });\n                $('#btn_close_all').on('click', function() {\n                    $('.toggler_open').hide();\n                    $('.toggler_closed').show();\n                    $('.toggle_area').addClass('hidden').hide();\n                    // Do not hide section 0\n                    $('#section-0').find('.sectionbody').removeClass('hidden').show();\n                    updateToggleSeq();\n                });\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            var initFunctions = function() {\n                // Load all required functions above\n                toggleSection();\n                toggleSectionsOpen();\n                toggleSectionsClose();\n                toggleAll();\n            };\n\n// ---------------------------------------------------------------------------------------------------------------------\n            $(document).ready(function() {\n                console.log('=================< topics2/toggle.js >=================');\n                initFunctions();\n            });\n        }\n    };\n});\n"],"file":"toggle.min.js"}
